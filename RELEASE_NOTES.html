<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [en] (X11; U; SunOS 5.8 sun4u) [Netscape]">
   <title>EPICS Release baseR3.14
</title>
</head>
<body>

<h1>
EPICS Release base 3.14.0alpha2</h1>

<h3>
Build changes</h3>
Build changes were made to base/configure files and base/src Makefiles
to make all os independant build created files created in an O.Common subdirectory
and then installed instead of created directly in an install directory.Build
definition names (e.g. RECTYPES, MENUS, DBDNAME, and BPTS) have been changed
to specify names of the files to be created and installed instead of the
source file names. All db and dbd related definitions and rules have been
moved into base/configure/RULES.Db file and the rules now allow multiple
dbd files and registerRecordDeviceDriver files to be created in a single
application Makefile. Also "gnumake depends" no longer depends on a complete
buildInstall.
<h3>
Converting alpha1 applications to alpha2</h3>
Build modifications in alpha2 require the following changes to existing
R3.14 applications.
<ul>
<li>
&nbsp;Remove the now unused RULES files</li>

<ul>&nbsp;
<br>./configure/RULES.Db
<br>./configure/RULES.registerRecordDeviceDriver
<br>&nbsp;</ul>

<li>
Delete the following line in ./configure/RULES</li>

<ul>&nbsp;
<br>include $(TOP)/configure/RULES.registerRecordDeviceDriver</ul>
</ul>

<ul>
<li>
&nbsp; In &lt;top>/configure/Makefile please change</li>

<ul>&nbsp;
<br>@$(PERL) $(TOOLS)/makeConfigAppInclude.pl $(T_A) $@ $(TOP)</ul>
to
<ul>@$(PERL) $(TOOLS)/makeConfigAppInclude.pl $(EPICS_HOST_ARCH) $(T_A)
$@ $(TOP)
<br>&nbsp;</ul>
and add the line
<ul>&nbsp;
<br>depends: install
<br>&nbsp;</ul>
to the bottom of the Makefile.
<ul>&nbsp;</ul>
</ul>

<ul>
<li>
In all *App/*Db/Makefileschange</li>

<ul>&nbsp;
<br>include $(TOP)/configure/RULES.Db</ul>
to
<ul>include $(TOP)/configure/RULES
<br>&nbsp;</ul>

<li>
In all *App/src/Makefile files</li>

<ul>&nbsp;</ul>
change&nbsp;&nbsp;&nbsp; DBDNAME = &lt;name>App&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;
DBD += &lt;name>
<ul>&nbsp;</ul>
and remove the line
<br>&nbsp;
<ul>DBDEXPAND = &lt;name>Include.dbd
<br>&nbsp;</ul>
NOTE: If any of your *App/*Db/Makefiles contain "DBDNAME =" lines you should
make these same changes in that *Db dirctory.
<br>&nbsp;
<li>
In all *App/src/Makefile Makefiles</li>

<ul>&nbsp;</ul>
change&nbsp;&nbsp;&nbsp; RECTYPES=&lt;name>.h&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;
DBDINC+=&lt;name>
<ul>&nbsp;</ul>
change&nbsp;&nbsp;&nbsp; MENUS=&lt;name>.h&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
DBDINC+=&lt;name></ul>

<ul>change&nbsp;&nbsp;&nbsp; BPTS&nbsp;&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;&nbsp;
DBD
<p>change&nbsp;&nbsp;&nbsp;&nbsp; INSTALLDB&nbsp;&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;
DB
<p>change&nbsp;&nbsp;&nbsp; DBDINSTALL&nbsp;&nbsp;&nbsp; to&nbsp;&nbsp;&nbsp;&nbsp;
DBD
<br>&nbsp;
<li>
In all example *App/src/Makefile files change</li>

<ul>&nbsp;
<br>example_SRCS_DEFAULT += registerRecordDeviceDriver.c</ul>
to
<ul>example_SRCS_DEFAULT += &lt;name>_registerRecordDeviceDriver.cpp
<br>&nbsp;</ul>
where &lt;name> is the base name of a &lt;name>.dbd file which was created
from a &lt;name>Include.dbd file and which will be loaded in a st.cmd or
stcmd.host script (e.g. example).
<br>&nbsp;
<li>
In ./iocBoot/ioc&lt;name>/st.cmd files change</li>

<br>&nbsp;
<ul>dbLoadDatabase("dbd/exampleApp.dbd")</ul>
to
<ul>dbLoadDatabase("dbd/example.dbd")
<br>&nbsp;</ul>

<li>
In &lt;top>/iocBoot/ioc&lt;name>/stcmd.host files change</li>

<ul>&nbsp;
<br>dbLoadDatabase("../../dbd/exampleApp.dbd",0,0)</ul>
to
<ul>dbLoadDatabase("../../dbd/example.dbd",0,0)</ul>
</ul>

<h3>
EPICS_HOST_ARCH changes</h3>
GNU compiler builds are now determined by the value of EPICS_HOST_ARCH
and are no longer specified in CONFIG_SITE.&nbsp; All references to the
ANSI (ACC/GCC) and CPLUSPLUS (CCC/G++) macros have been removed.
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
</body>
</html>
