<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>No title</title>
  <meta name="GENERATOR" content="amaya 5.3, see http://www.w3.org/Amaya/" />
</head>

<body>
<h1 style="text-align: center">EPICS base R3.13.0beta1: Known Problems</h1>

<h2>Device Support, which does not implement special_linconv, is broken</h2>
<p>In release beta1 changes were made to allow ESLO EOFF to be
database design fields. Because of changes that were made to aiRecord and
aoRecord device support that does not implement special_linconv
may no longer work.<p>
<p>To fix aiRecord.c, in init_record replace</p>
<pre>    if ((pai-&gt;linr == menuConvertLINEAR) &amp;&amp; pdset-&gt;special_li
nconv) {
</pre>
<p>by</p>
<pre>    if ((pai-&gt;eslo==1.0) &amp;&amp; (pai-&gt;eoff==0.0)) {
</pre>
<p>To fix aoRecord.c, in init_record replace</p>
<pre>    if ((pao-&gt;linr == menuConvertLINEAR) &amp;&amp; pdset-&gt;special_li
nconv) {
</pre>
<p>by</p>
<pre>    if ((pao-&gt;eslo==1.0) &amp;&amp; (pao-&gt;eoff==0.0)) {
</pre>

<h2>CA puts to disabled record</h2>
<p>If a CA client issues a put to a disabled record then, when the record is ena
bled, database puts to the record will not make the record process until a CA pu
t is again issued. The fix is:</p>
<pre>
diff -c -r1.113 dbAccess.c
*** dbAccess.c	2002/04/08 14:46:13	1.113
--- dbAccess.c	2002/05/02 20:09:18
***************
*** 614,619 ****
--- 614,620 ----
  		if(*ptrace) printf("disabled:  %s\n",precord->name);
  		/*take care of caching and notifyCompletion*/
  		precord->rpro = FALSE;
+ 		precord->putf = FALSE;
                  callNotifyCompletion = TRUE;
  		/* raise disable alarm */
  		if (precord->stat==DISABLE_ALARM) goto all_done;
</pre>

<h2>casEventMask</h2>

<p>The multiply-defined fatal error of the type</p>
<pre>ld: fatal: symbol `resTable&lt;casEventMaskEntry,
    stringId&gt;::tableSize(void) const' is multiply-defined:
    (file ../../../../../lib/solaris-sparc-&gt;gnu//libcas.a(caServerI.o)
    and file ../../../../../lib/solaris-sparc-&gt; gnu//libcas.a(casEventMask.o));
</pre>

<p>in the build of base can be fixed by removing line 43</p>
<pre>template class resTable &lt; casEventMaskEntry, stringId &gt;;
</pre>

<p>from base/src/cas/generic/casEventMask.cc.</p>

<h2>config - Old build rules</h2>

<p>The following files should be added in the base/config directory to allow
builds of  R3.13 (Makefile.Host) extensions with beta1.</p>
<pre>win32-x86-borland builds need:
File name:   CONFIG.Host.win32-x86-borland
File contents:   -include $(EPICS_BASE)/config/CONFIG.Host.Borland
File name:   CONFIG_HOST_ARCH.win32-x86-borland
File contents:   -include $(EPICS_BASE)/config/CONFIG_HOST_ARCH.Borland
File name:   CONFIG_SITE.Host.win32-x86-borland
File contents:   -include $(EPICS_BASE)/config/CONFIG_SITE.Host.Borland

hpux-m68k builds need:
File name:   CONFIG.Host.hpux-m68k
File contents:   -include $(EPICS_BASE)/config/CONFIG.Host.hp700
File name:   CONFIG_HOST_ARCH.hpux-m68k
File contents:   -include $(EPICS_BASE)/config/CONFIG_HOST_ARCH.hp700
File name:   CONFIG_SITE.Host.hpux-m68k
File contents:   -include $(EPICS_BASE)/config/CONFIG_SITE.Host.hp700

osf-alpha builds need:
File name:   CONFIG.Host.osf-alpha
File contents:   -include $(EPICS_BASE)/config/CONFIG.Host.alpha
File name:   CONFIG_HOST_ARCH.osf-alpha
File contents:   -include $(EPICS_BASE)/config/CONFIG_HOST_ARCH.alpha

sun4-sparc builds need:
File name:   CONFIG.Host.sun4-sparc
File contents:   -include $(EPICS_BASE)/config/CONFIG.Host.sun4
File name:   CONFIG_HOST_ARCH.sun4-sparc
File contents:   -include $(EPICS_BASE)/config/CONFIG_HOST_ARCH.sun
</pre>

<h2>configure - New build rules</h2>

<p>The following change is needed for shared library builds on Unix hosts.</p>
<pre>Index: CONFIG_BASE
===================================================================
RCS file: /net/phoebus/epicsmgr/cvsroot/epics/base/configure/CONFIG_BASE,v
retrieving revision 1.32
diff -r1.32 CONFIG_BASE
8a9
&gt; EPICS_BASE_HOST_LIB = $(EPICS_BASE)/lib/$(EPICS_HOST_ARCH)</pre>

<h2>vxWorks TIMEZONE pentium</h2>

<p>If the name of the timezone has more than a few characters a crash can
occur on pentium vxWorks iocs. See ansiTime in the vxWorks reference manual
for details about TIMEZONE.</p>

<h2>epicsReadLine</h2>

<p>src/libCom/osi/os/default/epicsReadline.c used a char variable to hold the
return value from getc(), and compared this against EOF. getc() returns int
not char because ANSI C allows char to be unsigned if the architecture finds
that easier, thus EOF can never be stored in a char on a PowerPC CPU. char
should be changed to int or signed char.</p>

<h2>RTEMS and NTP</h2>

<p>The RTEMS startup routine waits until a time synchronization packet is
received from an NTP server. This causes the RTEMS intialization to loop
endlessly if there is no NTP server on the network. This problem has been
fixed in the CVS version by allowing the initialization to time out after a
minute or so and to set the IOC time to January 1, 2001.</p>
=======</body>
</html>
